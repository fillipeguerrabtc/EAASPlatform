# =========================================
# EAAS PLATFORM - ENVIRONMENT VARIABLES
# =========================================
# Production-grade configuration template
# Copy to .env and fill with your actual values

# =========================================
# CORE
# =========================================
NODE_ENV=development                    # development | test | production
PORT=5000                               # Server port (Vite runs on 5173)
LOG_LEVEL=info                          # trace | debug | info | warn | error | fatal

# =========================================
# SINGLE TENANT MODE
# =========================================
SINGLE_TENANT=true                      # Enforce single-tenant architecture
# Note: PRIMARY_TENANT_ID is fetched from database (tenants table with is_primary=true)
# This allows dynamic admin control via UI without redeployment

# =========================================
# DATABASE (PostgreSQL / Neon)
# =========================================
DATABASE_URL=postgresql://user:password@host:5432/eaas

# Database schema (automatically managed by Drizzle)
PGDATABASE=eaas
PGHOST=your-db-host.neon.tech
PGPASSWORD=your-db-password
PGPORT=5432
PGUSER=your-db-user

# =========================================
# AUTHENTICATION
# =========================================
# Session secret (REQUIRED: min 32 characters in production)
SESSION_SECRET=change-this-to-a-random-32-plus-character-secret-in-production

# JWT secret (REQUIRED: min 32 characters in production)
JWT_SECRET=change-this-to-a-random-32-plus-character-jwt-secret

# Replit Auth (optional, only if deploying on Replit)
# REPLIT_DOMAINS=your-repl-name.replit.app

# =========================================
# CORS / ALLOWED ORIGINS
# =========================================
# Comma-separated list of allowed origins
# Development: localhost variants automatically included
# Production: set to your actual domain
CORS_ALLOW_ORIGINS=http://localhost:5173,https://replit.com

# =========================================
# STRIPE PAYMENT PROCESSING
# =========================================
STRIPE_MODE=sandbox                     # sandbox | production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Frontend Stripe key (prefixed with VITE_ for frontend access)
VITE_STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key

# Testing keys (optional, for automated testing)
# TESTING_STRIPE_SECRET_KEY=sk_test_xxx
# TESTING_VITE_STRIPE_PUBLIC_KEY=pk_test_xxx

# =========================================
# TWILIO WHATSAPP
# =========================================
TWILIO_MODE=sandbox                     # sandbox | production
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886  # Sandbox number

# =========================================
# OPENAI AI CAPABILITIES
# =========================================
OPENAI_API_KEY=sk-your-openai-api-key

# =========================================
# STORAGE & FILE UPLOADS
# =========================================
STORAGE_DIR=./.storage                  # Local filesystem storage directory
STORAGE_PUBLIC_BASE_URL=/public         # Public URL base for stored files

# =========================================
# BRAND SCANNER 2.1 PRO
# =========================================
# Enhanced brand scanner with K-Means clustering + media downloads

# Concurrency & Performance
BRAND_SCANNER_MAX_CONCURRENCY=2         # Max concurrent browser instances
BRAND_SCANNER_NAV_TIMEOUT_MS=45000      # Navigation timeout (45 seconds)
BRAND_SCANNER_MAX_PAGES=0               # 0 = unlimited pages (use with caution)
BRAND_SCANNER_MAX_TOTAL_BYTES=524288000 # 500MB max download per scan

# Media Downloads
BRAND_SCANNER_DOWNLOAD_MEDIA=true       # Enable media (images/videos) download
BRAND_SCANNER_ALLOWED_MIME=image/*,video/*,image/svg+xml,image/gif
BRAND_SCANNER_BLOCK_THIRD_PARTY=false   # Allow 3rd party resources for media

# Screenshots & Snapshots
BRAND_SCANNER_SNAPSHOT_VIEWPORT=1440x900  # Screenshot viewport size

# Robots.txt & User Agent
BRAND_SCANNER_RESPECT_ROBOTS=false      # Client authorized extraction
BRAND_SCANNER_USER_AGENT=EAAS-BrandScanner/2.1-PRO (+https://your-domain.com)

# =========================================
# REDIS / QUEUE (Optional, for BullMQ)
# =========================================
# REDIS_URL=redis://localhost:6379

# =========================================
# SLA WORKER (Background Jobs)
# =========================================
ENABLE_SLA_WORKER=false                 # Set to true to enable SLA monitoring

# =========================================
# FRONTEND (Vite)
# =========================================
VITE_PUBLIC_BASE_URL=http://localhost:5000

# =========================================
# DEVELOPMENT / SEEDING (NEVER USE IN PRODUCTION!)
# =========================================
# Uncomment ONLY for local development to seed default admin
# SEED_DEFAULT_ADMIN=true
# DEFAULT_ADMIN_PASSWORD=your-secure-password-here

# =========================================
# SECURITY NOTES
# =========================================
# 1. NEVER commit .env to git (it's in .gitignore)
# 2. Rotate SESSION_SECRET and JWT_SECRET to 32+ char random strings
# 3. Use Stripe sandbox keys for development/testing
# 4. Use Twilio sandbox for development/testing
# 5. Set SINGLE_TENANT=true enforces single-tenant mode
# 6. Primary tenant is managed via database (is_primary flag)
